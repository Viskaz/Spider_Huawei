var contentfilterTable;var popUpString=new Array();function init(b){var a=GetIEVersion();if(a){$$(".filterThDiv").css("margin-right","10px")}if(hwMozilla){b.wrap("<div style='position:relative;float:right;'></div>")http://127.0.0.1:7890/pages/31180AFB/02/31180AFB/02/resources/public_sys-resources/;b.css("top","0px")}}function GetIEVersion(){var b=window.navigator.userAgent;var a=b.indexOf("MSIE");if(a>0){return true}else{if(!!navigator.userAgent.match(/Trident\/7\./)){return true}else{return false}}}function showfilterListBox(j,m,p,v,r){if($$(".filterListBox").length!=0){for(var s=0;s<$$(".filterListBox").length;s++){$$(".filterListBox")[s].hidden=true;var w=GetIEVersion();if(w){$$(".filterListBox")[s].removeNode(true)}else{$$($$(".filterListBox")[s]).prev().closest(".filterBtn").removeClass("disabled");try{$$(".filterListBox")[s].remove()}catch(t){$$(".filterListBox")[s].removeNode(true)}}}}if(j.next().length>0){j.next().remove()}popUpString.length=0;contentfilterTable=j.closest("table");var b=contentfilterTable.find("tr:eq(1)");var n="<li><label><input type='checkbox' id='";var u="<li><label><input type='checkbox' checked='checked' id='";var d="<li style='display:none;'><label><input type='checkbox' id='";var q="<li style='display:none;'><label><input type='checkbox' checked='checked' id='";var o="'><span>";var f="</span></label></li>";var k="";var l="";if(m){l="<div class='filterListBox'><ul><li><label><input type='checkbox' id='chooseAll'>("+r+")</label></li>"}else{l="<div class='filterListBox hide'><ul><li><label><input type='checkbox' id='chooseAll'>("+r+")</label></li>"}var g=0;var c=contentfilterTable.find("tr").length;for(var s=1;s<c;s++){var h=b.find("td:nth-child("+j.attr("index")+")");if(b[0].style.display!="none"){b.attr("liSelected","liSelected")}else{b.attr("liSelected","")}var a=($$.trim(h.text()));if(a==""){a=emptyStr}if(b.attr("liSelected")==""){if($$.inArray(a,popUpString)==-1){k+=n+s+o+a+f}else{k+=d+s+o+a+f}}else{if($$.inArray(a,popUpString)==-1){k+=u+s+o+a+f}else{k+=q+s+o+a+f}g++}popUpString.push(a);b=b.next()}if(popUpString.length==g){if(m){l="<div class='filterListBox'><ul><li><label><input type='checkbox' checked='checked' id='chooseAll'>("+r+")</label></li>"}else{l="<div class='filterListBox hide'><ul><li><label><input type='checkbox' checked='checked' id='chooseAll'>("+r+")</label></li>"}}k+="</ul><div class='filterListBoxTitle'><span class='filterListBoxTitleSubmit fr'><button class='blueBtn'  onclick=\"confirmDataTableFilter($$(this));\">"+p+"</button><span>&nbsp;</span><button class='grayBtn' onclick=\"CloseDiv($$(this));\">"+v+"</button></span></div></div>";j.after(l+k);if(j.offset().left<300){$$(".filterListBox").css("left","0px")}j.next().find("input").not("#chooseAll").click(function(){var e=$$(this).prop("checked");var x=$$(this).parent().parent().index();var y=$$.trim($$(this).next().text());if(e){contentfilterTable.find("tr:eq("+x+")").attr("liSelected","liSelected");contentfilterTable.find("li:hidden label:contains('"+y+"')").each(function(){if($$.trim($$(this).text())==y){var A=$$(this).children("input").attr("id");contentfilterTable.find("tr:eq("+A+")").attr("liSelected","liSelected")}})}else{contentfilterTable.find("tr:eq("+x+")").attr("liSelected","");contentfilterTable.find("li:hidden label:contains('"+y+"')").each(function(){if($$.trim($$(this).text())==y){var A=$$(this).children("input").attr("id");contentfilterTable.find("tr:eq("+A+")").attr("liSelected","")}})}var i=$$(".filterListBox li:visible input[type='checkbox']:checked").not("#chooseAll").length;var z=$$(".filterListBox li:visible input[type='checkbox']").not("#chooseAll").length;if(i==z){$$("#chooseAll").prop("checked",true)}else{$$("#chooseAll").prop("checked",false)}if(i==0){$$(".blueBtn").attr("disabled",true)}else{$$(".blueBtn").attr("disabled",false)}});j.next().find("#chooseAll").click(function(){var e=$$(this).prop("checked");if(e){$$("#chooseAll").prop("checked",true);$$(".filterListBox li:visible input[type='checkbox']:nth-child(2n-1)").not("#chooseAll").prop("checked",true);contentfilterTable.find("tbody tr").attr("liSelected","liSelected");$$(".blueBtn").attr("disabled",false)}else{$$("#chooseAll").prop("checked",false);$$(".filterListBox li:visible input[type='checkbox']:nth-child(2n-1)").not("#chooseAll").prop("checked",false);contentfilterTable.find("tbody tr").attr("liSelected","");$$(".blueBtn").attr("disabled",true)}});$$("body").bind("click",function(x){var A=x.pageX||x.clientX+document.body.scroolLeft;var y=x.pageY||x.clientY+document.body.scrollTop;var e=x.srcElement?x.srcElement:x.target;if(e.className=="filterBtn disabled"){return}if(null==$$(".filterListBox").offset()){return}var z=$$(".filterListBox").offset().left;var i=$$(".filterListBox").offset().top;if(A>z&&A<z+304&&y>i&&y<i+235){return}else{$$(".filterListBox").addClass("hide");$$(".filterListBox").hide("normal")}})}function CloseDiv(b){var c=b.closest("table").find("tbody tr[liSelected='liSelected']").length;var a=b.closest("table").find("tbody tr").length;if(c==a){b.closest(".filterListBox").siblings(".filterBtn").removeClass("disabled")}b.closest(".filterListBox").hide();b.closest(".filterListBox").remove();popUpString.length=0}function confirmDataTableFilter(b){var c=b.closest("table").find("tbody tr[liSelected='liSelected']").length;var a=b.closest("table").find("tbody tr").length;if(c==a){b.closest(".filterListBox").siblings(".filterBtn").removeClass("disabled")}b.closest(".filterListBox").hide();b.closest("table").find("tbody tr[liSelected='liSelected']").show();b.closest("table").find("tbody tr[liSelected='']").hide();b.closest(".filterListBox").remove();popUpString.length=0};